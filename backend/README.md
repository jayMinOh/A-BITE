-- A_BITE.T_FAVORITES definition

CREATE TABLE `T_FAVORITES` (
`FAVORITE_ID` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '즐겨찾기 ID',
`MEMBER_NO` bigint(20) NOT NULL COMMENT '사용자 ID (T_MEMBERS 참조)',
`MENU_ID` bigint(20) NOT NULL COMMENT '즐겨찾기 메뉴 ID (T_MENUS 참조)',
`CREATED_AT` datetime DEFAULT current_timestamp() COMMENT '즐겨찾기 등록 시간',
PRIMARY KEY (`FAVORITE_ID`),
KEY `MEMBER_NO` (`MEMBER_NO`),
KEY `MENU_ID` (`MENU_ID`),
CONSTRAINT `t_favorites_ibfk_1` FOREIGN KEY (`MEMBER_NO`) REFERENCES `T_MEMBERS` (`MEMBER_NO`) ON DELETE CASCADE,
CONSTRAINT `t_favorites_ibfk_2` FOREIGN KEY (`MENU_ID`) REFERENCES `T_MENUS` (`MENU_ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='즐겨찾기 메뉴 관리';


-- A_BITE.T_LANGUAGES definition

CREATE TABLE `T_LANGUAGES` (
`LANGUAGE_ID` bigint(20) NOT NULL AUTO_INCREMENT,
`MULTI_LANG_ID` varchar(30) NOT NULL COMMENT '다국어 ID',
`LANG_TYPE` varchar(20) NOT NULL COMMENT '언어(Language) Type',
`LANGUAGE_TYPE` varchar(20) NOT NULL COMMENT '다국어 유형 (LABEL, ALERT, TEMPLATE 등)',
`MULTI_LANG_USAGE_CD` varchar(20) NOT NULL COMMENT '다국어 용도 코드',
`MULTI_LANG_TXT` varchar(4000) NOT NULL COMMENT '다국어 TEXT',
`CREATED_AT` datetime DEFAULT current_timestamp() COMMENT '생성 시각',
`UPDATED_AT` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp() COMMENT '수정 시각',
`DELETED_AT` datetime DEFAULT NULL COMMENT '논리 삭제',
PRIMARY KEY (`LANGUAGE_ID`),
UNIQUE KEY `IDX_LANG_MULTI` (`MULTI_LANG_ID`,`LANG_TYPE`,`MULTI_LANG_USAGE_CD`,`LANGUAGE_TYPE`)
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='다국어 관리';

-- A_BITE.T_MEMBERS definition

CREATE TABLE `T_MEMBERS` (
`MEMBER_NO` bigint(20) NOT NULL AUTO_INCREMENT,
`LOGIN_ID` varchar(255) NOT NULL,
`PASSWORD` varchar(255) NOT NULL,
`USER_TYPE` enum('BUYER','SELLER','ADMIN') NOT NULL DEFAULT 'BUYER' COMMENT '사용자 유형 (BUYER=구매자, SELLER=판매자, ADMIN=관리자)',
`LANG_TYPE` varchar(2) DEFAULT 'KR',
`NAME` varchar(100) NOT NULL,
`ADDRESS` varchar(500) DEFAULT NULL,
`LATITUDE` decimal(10,8) DEFAULT NULL,
`LONGITUDE` decimal(11,8) DEFAULT NULL,
`CREATED_AT` datetime DEFAULT current_timestamp(),
`UPDATED_AT` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp(),
`DELETED_AT` datetime DEFAULT NULL,
PRIMARY KEY (`MEMBER_NO`),
UNIQUE KEY `LOGIN_ID` (`LOGIN_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- A_BITE.T_MENUS definition

CREATE TABLE `T_MENUS` (
`MENU_ID` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '메뉴 ID',
`PARENT_MENU_ID` bigint(20) DEFAULT NULL COMMENT '부모 메뉴 ID (NULL이면 최상위)',
`MULTI_LANG_ID` varchar(30) NOT NULL COMMENT '다국어 ID',
`MENU_TYPE` enum('CATEGORY','PAGE','FUNCTION') NOT NULL COMMENT '메뉴 유형',
`MENU_ORDER` int(11) NOT NULL COMMENT '정렬 순서',
`LINK_URL` varchar(500) DEFAULT NULL COMMENT '메뉴 이동 URL',
`VISIBLE_BUYER` tinyint(1) NOT NULL DEFAULT 1 COMMENT '구매자(BUYER)에게 보이는 메뉴 (1=보임, 0=숨김)',
`VISIBLE_SELLER` tinyint(1) NOT NULL DEFAULT 1 COMMENT '판매자(SELLER)에게 보이는 메뉴 (1=보임, 0=숨김)',
`IS_MOBILE` tinyint(1) NOT NULL DEFAULT 1 COMMENT '모바일에서 보이는지 여부 (1=모바일 지원, 0=PC 전용)',
`CREATED_AT` datetime DEFAULT current_timestamp() COMMENT '생성 시각',
`UPDATED_AT` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp() COMMENT '수정 시각',
PRIMARY KEY (`MENU_ID`),
KEY `PARENT_MENU_ID` (`PARENT_MENU_ID`),
CONSTRAINT `t_menus_ibfk_1` FOREIGN KEY (`PARENT_MENU_ID`) REFERENCES `T_MENUS` (`MENU_ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='메뉴 관리';

-- A_BITE.T_RECIPES definition

CREATE TABLE `T_RECIPES` (
`RECIPE_ID` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '레시피 ID',
`SELLER_ID` bigint(20) NOT NULL COMMENT '판매자 ID (T_MEMBERS 참조)',
`CATEGORY_ID` bigint(20) NOT NULL COMMENT '카테고리 ID (T_MENUS 참조)',
`TITLE` varchar(255) NOT NULL COMMENT '레시피 제목',
`DESCRIPTION` text NOT NULL COMMENT '레시피 설명 (HTML 포함)',
`COOKING_TIME` int(11) NOT NULL COMMENT '조리 시간 (분)',
`SERVINGS` int(11) NOT NULL COMMENT '몇 인분 기준',
`INGREDIENTS` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL COMMENT '재료 목록 (JSON)' CHECK (json_valid(`INGREDIENTS`)),
`STEPS` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL COMMENT '조리 과정 (JSON)' CHECK (json_valid(`STEPS`)),
`CREATED_AT` datetime DEFAULT current_timestamp() COMMENT '등록 시각',
`UPDATED_AT` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp() COMMENT '수정 시각',
PRIMARY KEY (`RECIPE_ID`),
KEY `SELLER_ID` (`SELLER_ID`),
KEY `CATEGORY_ID` (`CATEGORY_ID`),
CONSTRAINT `t_recipes_ibfk_1` FOREIGN KEY (`SELLER_ID`) REFERENCES `T_MEMBERS` (`MEMBER_NO`) ON DELETE CASCADE,
CONSTRAINT `t_recipes_ibfk_2` FOREIGN KEY (`CATEGORY_ID`) REFERENCES `T_MENUS` (`MENU_ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='레시피 관리';

-- A_BITE.T_RECIPE_IMAGES definition

CREATE TABLE `T_RECIPE_IMAGES` (
`IMAGE_ID` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '이미지 ID',
`RECIPE_ID` bigint(20) NOT NULL COMMENT '레시피 ID (T_RECIPES 참조)',
`IMAGE_URL` varchar(500) NOT NULL COMMENT '이미지 URL',
`CREATED_AT` datetime DEFAULT current_timestamp() COMMENT '등록 시각',
PRIMARY KEY (`IMAGE_ID`),
KEY `RECIPE_ID` (`RECIPE_ID`),
CONSTRAINT `t_recipe_images_ibfk_1` FOREIGN KEY (`RECIPE_ID`) REFERENCES `T_RECIPES` (`RECIPE_ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='레시피 이미지 관리';

-- A_BITE.T_REVIEWS definition

CREATE TABLE `T_REVIEWS` (
`REVIEW_ID` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '리뷰 ID',
`RECIPE_ID` bigint(20) NOT NULL COMMENT '레시피 ID (T_RECIPES 참조)',
`MEMBER_NO` bigint(20) NOT NULL COMMENT '작성자 ID (T_MEMBERS 참조)',
`RATING` tinyint(1) NOT NULL COMMENT '평점 (1~5)',
`COMMENT` text NOT NULL COMMENT '리뷰 내용',
`CREATED_AT` datetime DEFAULT current_timestamp() COMMENT '작성 시각',
`UPDATED_AT` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp() COMMENT '수정 시각',
PRIMARY KEY (`REVIEW_ID`),
KEY `RECIPE_ID` (`RECIPE_ID`),
KEY `MEMBER_NO` (`MEMBER_NO`),
CONSTRAINT `t_reviews_ibfk_1` FOREIGN KEY (`RECIPE_ID`) REFERENCES `T_RECIPES` (`RECIPE_ID`) ON DELETE CASCADE,
CONSTRAINT `t_reviews_ibfk_2` FOREIGN KEY (`MEMBER_NO`) REFERENCES `T_MEMBERS` (`MEMBER_NO`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='리뷰 관리';